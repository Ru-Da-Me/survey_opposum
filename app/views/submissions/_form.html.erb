<div class="container">

  <%= form_for(@submission) do |f| %>
    <% if @submission.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(@submission.errors.count, "error") %> prohibited this submission from being saved:</h2>

        <ul>
        <% @submission.errors.full_messages.each do |message| %>
          <li><%= message %></li>
        <% end %>
        </ul>
      </div>
    <% end %>

    <%= f.fields_for(:answers) do |ff| %>
       <% q = ff.object.question %>
       <%= ff.hidden_field :question_id, value: q.id %>
       <%= q.text %>
       <% if q.required == true %>
         <div> (Required) </div>
       <% else %>
         <div> (Optional) </div>
       <% end %>
       <% if q.question_type == "Yes/No" %>
         <div class="field">
           <%= ff.label :answer_text, 'Yes' %>
           <%= ff.radio_button :answer_text, 'Yes'%>
           <%= ff.label :answer_text, 'No' %>
           <%= ff.radio_button :answer_text, 'No'%><br
         </div>
       <% elsif q.question_type == "Short" %>
         <div class="field">
           <%= ff.label :answer_text %><br>
           <%= ff.text_field :answer_text %>
         </div>
       <% elsif q.question_type == "Long" %>
         <div class="field">
           <%= ff.label :answer_text %><br>
           <%= ff.text_area :answer_text %>
         </div>
       <% end %>
     <% end %>
     <div class="actions">
       <%= f.submit "Submit Survey", class: "submit-button" %>
     </div>
   <% end %>
